# 新功能测试指南

## 修复问题
✅ **已修复EOF死循环问题**：所有输入循环现在都能正确处理EOF，程序不会再无限循环

## 功能1：创建群功能测试

### QQ群创建
```
步骤：
1. 启动程序：.\main.exe
2. 选择 1（QQ服务登录）
3. 输入已有QQ账号和密码登录
4. 选择 2（群组管理）
5. 选择 2（创建新群）
6. 输入群ID（如：9001）
7. 输入群名称（如：测试QQ群）
8. 验证创建成功提示
9. 选择 1（查看全部群）验证新群存在
```

### 微信群创建
```
步骤：
1. 登录微信账号
2. 进入群组管理 → 创建新群
3. 输入群ID和名称
4. 验证创建成功
```

## 功能2：QQ群管理员体系测试

### 设置管理员
```
步骤：
1. 以群主身份登录QQ
2. 群组管理 → 选择 6（QQ群管理员设置）
3. 输入QQ群ID
4. 选择 1（添加管理员）
5. 输入要设置为管理员的用户ID
6. 验证设置成功
```

### QQ加群申请流程
```
用户A（申请者）：
1. 登录QQ账号
2. 群组管理 → 选择 3（加入群）
3. 输入群ID
4. 输入申请信息（如：我想加入这个群）
5. 等待审批

用户B（群主或管理员）：
1. 登录QQ账号（群主或管理员）
2. 群组管理 → 选择 7（处理加群申请）
3. 输入群ID
4. 查看申请列表
5. 输入申请者ID
6. 选择 1（同意）或 2（拒绝）
7. 验证处理结果
```

## 功能3：微信群邀请机制测试

### 邀请成员入群
```
用户A（群成员）：
1. 登录微信账号（已加入某群）
2. 群组管理 → 选择 6（邀请成员入群）
3. 输入微信群ID
4. 输入要邀请的用户ID
5. 验证邀请成功

用户B（被邀请者）：
1. 检查是否已加入群
```

### 验证无法直接申请
```
1. 登录微信账号
2. 尝试选择 3（加入群）加入微信群
3. 应该提示：微信群需要群成员邀请才能加入
```

## 功能4：QQ-微信账号绑定测试

### 绑定流程
```
步骤：
1. 注册或登录QQ账号（如：QQ2001）
2. 进入服务管理（选项3）
3. 选择 4（QQ-微信账号绑定）
4. 输入要绑定的微信ID（如：WX2001）
5. 验证绑定成功提示
6. 登出

验证绑定：
1. 登录微信账号（WX2001）
2. 进入服务管理 → QQ-微信账号绑定
3. 应显示"当前已绑定QQ: QQ2001"
```

### 推荐好友验证
```
步骤：
1. QQ账号（QQ2001）添加一些好友
2. 绑定微信账号（WX2001）
3. 登录微信账号
4. 进入好友管理 → 选择 5（查看跨服务推荐好友）
5. 应显示QQ好友列表作为推荐
```

### 更换绑定
```
步骤：
1. 登录已绑定的QQ账号
2. 服务管理 → QQ-微信账号绑定
3. 选择 1（更换绑定）
4. 输入新的微信ID
5. 验证更换成功
```

### 取消绑定
```
步骤：
1. 服务管理 → QQ-微信账号绑定
2. 选择 2（取消绑定）
3. 验证取消成功
```

## 功能5：开通新服务双向生效测试

### 开通微信服务（QQ用户）
```
步骤：
1. 登录QQ账号（已绑定微信）
2. 服务管理 → 选择 2（开通新服务）
3. 输入服务类型：WECHAT
4. 输入登录凭证（微信密码）
5. 验证服务开通成功
6. 验证可切换到微信服务
```

### 验证服务状态
```
步骤：
1. 服务管理 → 选择 1（查看服务状态）
2. 应该显示QQ和WECHAT都已开通
3. 可以使用选项3切换服务
```

## 综合测试场景

### 场景1：完整的QQ群管理流程
```
1. 用户A创建QQ群
2. 用户A设置用户B为管理员
3. 用户C申请加入群
4. 管理员B审批通过
5. 用户C成功加入群
6. 群主A创建临时讨论组
7. 验证所有功能正常
```

### 场景2：微信群邀请链
```
1. 用户A创建微信群
2. 用户A邀请用户B
3. 用户B加入后邀请用户C
4. 验证三人都在群内
5. 群主A设置群公告
6. 验证公告显示
```

### 场景3：跨平台好友推荐
```
1. QQ账号添加5个好友
2. 绑定微信账号
3. 微信查看推荐好友
4. 从推荐中添加好友
5. 验证跨平台好友同步
```

## 数据持久化验证

### 测试步骤
```
1. 执行上述所有操作
2. 退出程序（选项0）
3. 重新启动程序
4. 验证：
   - 创建的群还在
   - 管理员设置保留
   - 加群申请记录保留
   - 绑定关系保留
   - 群成员关系正确
```

## 预期结果总结

✅ 所有服务都能创建群
✅ QQ群支持管理员设置和申请审批
✅ 微信群只能通过邀请加入
✅ QQ-微信绑定双向生效
✅ 绑定后推荐好友功能生效
✅ 所有数据正确持久化
✅ EOF输入正确处理，无死循环
